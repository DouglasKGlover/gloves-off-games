import{_ as I,a as G}from"./BiSYcTYW.js";import{_ as L}from"./BDBL0v1s.js";import{l as m,g as V,m as M,c as l,o as s,a as n,h as r,i,t as d,q as B,v as T,F as p,r as h,s as P,b as D,w as $,d as A}from"./CdtAEXek.js";const U={class:"container"},q={class:"game-list-wrapper"},R={key:0,class:"mobile-no-pad filters-column"},z={id:"game-filters"},E={class:"container"},j={class:"filter-header"},H={class:"mobile-no-pad filter-count"},J={class:"container"},K={class:"filter-options"},O={key:0,class:"filter-item"},Q=["label"],X=["value"],Y=["value"],Z={key:1,class:"filter-item"},tt=["label"],et=["value"],lt=["value"],st={key:2,class:"filter-item"},it=["label"],ot=["value"],nt=["value"],at={key:0,class:"filter-reset"},ut={class:"mobile-no-pad games-column"},rt={key:0},dt={key:1},ct={class:"load-more"},ht={__name:"ListWithFilters",props:{games:{type:Array,required:!0}},setup(W){const y=W,w=m(999),b=m([{value:null,text:"By Status"},{label:"Statuses",options:[]}]),S=m([{value:null,text:"By Physical/Digital"},{label:"Physical/Digital",options:[]}]),g=m([{value:null,text:"By WTB/WTS"},{label:"Wanting to:",options:[]}]),a=m({status:null,digital:null,wtbWts:null}),F=()=>{w.value=w.value+25},C=()=>{a.value={status:null,digital:null,wtbWts:null}},k=V(()=>{let o=y.games;return a.value.wtbWts&&(o=o.filter(e=>e.wtbWts==a.value.wtbWts)),a.value.status&&(o=o.filter(e=>e.playedStatus==a.value.status)),a.value.digital!==null&&(o=o.filter(e=>{if(e.digital&&a.value.digital)return!0;if(!e.digital&&!a.value.digital)return!0})),o}),N=V(()=>k.value.slice(0,w.value));return M(()=>{let o=[],e=[];y.games.filter(function(u){return o.findIndex(_=>_.playedStatus==u.playedStatus)<=-1&&(o.push(u),e.push(u.playedStatus)),null}),b.value[1].options=e.sort(),o=[],e=[],y.games.filter(function(u){return o.findIndex(_=>_.digital==u.digital)<=-1&&u.digital&&(o.push(u),e.push({text:"Digital",value:!0}),e.push({text:"Physical",value:!1})),null}),S.value[1].options=e.sort(),o=[],e=[],y.games.filter(function(u){if(o.findIndex(_=>_.wtbWts==u.wtbWts)<=-1&&u.wtbWts!==null)switch(o.push(u),u.wtbWts){case"WTB":e.push({text:"Buy",value:"WTB"});break;case"WTS":e.push({text:"Sell",value:"WTS"});break}return null}),g.value[1].options=e.sort()}),(o,e)=>{const u=I,x=G,_=L;return s(),l("div",U,[n("div",q,[i(b)[1].options.length>1||i(g)[1].options.length?(s(),l("div",R,[n("div",z,[n("div",E,[n("div",j,[e[4]||(e[4]=n("div",{class:"mobile-no-pad"},[n("h2",null,"Filter")],-1)),n("div",H,[n("p",null,d(i(k).length)+"/"+d(W.games.length),1)])])]),n("div",J,[n("div",K,[i(b)[1].options.length>1?(s(),l("div",O,[B(n("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i(a).status=t),class:"filter-select"},[(s(!0),l(p,null,h(i(b),(t,v)=>(s(),l("optgroup",{key:v,label:t.label},[t.label?r("",!0):(s(),l("option",{key:0,value:t.value},d(t.text),9,X)),(s(!0),l(p,null,h(t.options,(c,f)=>(s(),l("option",{key:f,value:c},d(c),9,Y))),128))],8,Q))),128))],512),[[T,i(a).status]])])):r("",!0),i(S)[1].options.length>1?(s(),l("div",Z,[B(n("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>i(a).digital=t),class:"filter-select"},[(s(!0),l(p,null,h(i(S),(t,v)=>(s(),l("optgroup",{key:v,label:t.label},[t.label?r("",!0):(s(),l("option",{key:0,value:t.value},d(t.text),9,et)),(s(!0),l(p,null,h(t.options,(c,f)=>(s(),l("option",{key:f,value:c.value},d(c.text),9,lt))),128))],8,tt))),128))],512),[[T,i(a).digital]])])):r("",!0),i(g)[1].options.length?(s(),l("div",st,[B(n("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>i(a).wtbWts=t),class:"filter-select"},[(s(!0),l(p,null,h(i(g),(t,v)=>(s(),l("optgroup",{key:v,label:t.label},[t.label?r("",!0):(s(),l("option",{key:0,value:t.value},d(t.text),9,ot)),(s(!0),l(p,null,h(t.options,(c,f)=>(s(),l("option",{key:f,value:c.value},d(c.text),9,nt))),128))],8,it))),128))],512),[[T,i(a).wtbWts]])])):r("",!0)]),i(k).length<W.games.length?(s(),l("div",at,[n("div",null,[n("button",{onClick:C},"Remove Filters")])])):r("",!0)])])])):r("",!0),n("div",ut,[(s(!0),l(p,null,h(i(N),(t,v)=>(s(),l("div",{key:`game-${v}`,class:P(t.playedStatus)},[D(u,{status:t.playedStatus},null,8,["status"]),D(_,{to:`/games/${t.system.slug}/${t.slug}`},{default:$(()=>[A(d(t.title)+" ",1),D(x,{region:t.region},null,8,["region"]),t.system.shortName?(s(),l("sup",rt," ["+d(t.system.shortName)+"]",1)):r("",!0),t.digital?(s(),l("sup",dt," [Digital]")):r("",!0)]),_:2},1032,["to"])],2))),128)),n("div",ct,[i(N).length<i(k).length?(s(),l("button",{key:0,onClick:e[3]||(e[3]=t=>F())}," Load More ")):r("",!0)])])])])}}};export{ht as _};
